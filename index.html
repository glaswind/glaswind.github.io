<!DOCTYPE html>
<html lang="ru">
<head>
    <base target="_self">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–ø–∏–ª–∫–∞ - –¢—Ä–µ–∫–µ—Ä –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π</title>
    <meta name="description" content="–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∫–æ–ø–∏–ª–∫–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–∞—à–∏—Ö –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Ñ–æ–Ω -->
    <style>
        body {
            background: url("https://i.imgur.com/3N1y7aY.png");
            background-size: cover;
            background-attachment: fixed;
        }

        /* –°–Ω–µ–≥ */
        .snowflake {
            position: fixed;
            top: -10px;
            z-index: 9999;
            color: white;
            font-size: 1rem;
            user-select: none;
            pointer-events: none;
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% { transform: translateY(-10px); }
            100% { transform: translateY(110vh); }
        }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#d91e18",        // –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∫—Ä–∞—Å–Ω—ã–π
                        secondary: "#0b6623",      // –ó–µ–ª—ë–Ω—ã–π
                        accent: "#e8b923",         // –ó–æ–ª–æ—Ç–æ–π
                        success: "#0b6623",
                        background: "#ffffffaa"
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-background">

    <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–Ω–µ–≥–∞ -->
    <script>
        for (let i = 0; i < 40; i++) {
            let snow = document.createElement("div");
            snow.className = "snowflake";
            snow.textContent = "‚ùÑ";
            snow.style.left = Math.random() * 100 + "vw";
            snow.style.fontSize = (Math.random() * 20 + 10) + "px";
            snow.style.animationDuration = (Math.random() * 5 + 5) + "s";
            document.body.appendChild(snow);
        }
    </script>

    <header class="bg-white shadow-xl rounded-b-3xl border-b-4 border-accent">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-holly-berry text-3xl text-accent"></i>
                    <h1 class="text-2xl font-bold text-primary">üéÑ –ú–æ—è –ö–æ–ø–∏–ª–∫–∞ üéÅ</h1>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-8">

        <!-- –ë–∞–ª–∞–Ω—Å -->
        <section class="bg-white/90 rounded-2xl shadow-lg p-6 mb-8 backdrop-blur">
            <div class="text-center">
                <h2 class="text-2xl font-semibold text-gray-700 mb-2">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</h2>
                <div class="text-4xl font-bold text-primary mb-4" id="currentBalance">0</div>

                <div class="flex justify-center space-x-4">
                    <button id="addMoney" class="bg-success text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i>–î–æ–±–∞–≤–∏—Ç—å
                    </button>
                    <button id="withdrawMoney" class="bg-red-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors">
                        <i class="fas fa-minus mr-2"></i>–°–Ω—è—Ç—å
                    </button>
                </div>
            </div>
        </section>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ -->
        <section class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <button class="quick-action bg-white/90 rounded-xl shadow-lg p-4 text-center hover:shadow-xl transition-shadow" data-amount="100">
                <div class="text-2xl font-bold text-primary">100</div>
                <div class="text-sm text-gray-600 mt-1">–ë—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–∏—Ç—å</div>
            </button>
            <button class="quick-action bg-white/90 rounded-xl shadow-lg p-4 text-center hover:shadow-xl transition-shadow" data-amount="500">
                <div class="text-2xl font-bold text-primary">500</div>
                <div class="text-sm text-gray-600 mt-1">–ë—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–∏—Ç—å</div>
            </button>
            <button class="quick-action bg-white/90 rounded-xl shadow-lg p-4 text-center hover:shadow-xl transition-shadow" data-amount="1000">
                <div class="text-2xl font-bold text-primary">1000</div>
                <div class="text-sm text-gray-600 mt-1">–ë—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–∏—Ç—å</div>
            </button>
            <button class="quick-action bg-white/90 rounded-xl shadow-lg p-4 text-center hover:shadow-xl transition-shadow" data-amount="5000">
                <div class="text-2xl font-bold text-primary">5000</div>
                <div class="text-sm text-gray-600 mt-1">–ë—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–∏—Ç—å</div>
            </button>
        </section>

        <!-- –¶–µ–ª–∏ -->
        <section class="bg-white/90 rounded-2xl shadow-lg p-6 mb-8 backdrop-blur">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-semibold text-gray-800">–ú–æ–∏ —Ü–µ–ª–∏</h2>
                <button id="addGoal" class="bg-primary text-white px-4 py-2 rounded-lg text-sm hover:bg-secondary transition-colors">
                    <i class="fas fa-plus mr-1"></i>–ù–æ–≤–∞—è —Ü–µ–ª—å
                </button>
            </div>
            <div id="goalsList" class="space-y-4"></div>
        </section>

        <!-- –ò—Å—Ç–æ—Ä–∏—è -->
        <section class="bg-white/90 rounded-2xl shadow-lg p-6 backdrop-blur">
            <h2 class="text-xl font-semibold text-gray-800 mb-6">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
            <div id="transactionsList" class="space-y-3"></div>
        </section>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫—Ä–æ–º–µ –≤–∞–ª—é—Ç—ã) -->
    <div id="addMoneyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 m-4 max-w-md w-full">
            <h3 class="text-xl font-semibold mb-4">–î–æ–±–∞–≤–∏—Ç—å –¥–µ–Ω—å–≥–∏</h3>
            <input type="number" id="addAmount" placeholder="–°—É–º–º–∞" class="w-full p-3 border border-gray-300 rounded-lg mb-4">
            <textarea id="addDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" class="w-full p-3 border border-gray-300 rounded-lg mb-4"></textarea>
            <div class="flex space-x-3">
                <button id="confirmAdd" class="flex-1 bg-success text-white py-3 rounded-lg font-semibold">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button id="cancelAdd" class="flex-1 bg-gray-300">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div id="withdrawMoneyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 m-4 max-w-md w-full">
            <h3 class="text-xl font-semibold mb-4">–°–Ω—è—Ç—å –¥–µ–Ω—å–≥–∏</h3>
            <input type="number" id="withdrawAmount" placeholder="–°—É–º–º–∞" class="w-full p-3 border border-gray-300 rounded-lg mb-4">
            <textarea id="withdrawDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" class="w-full p-3 border border-gray-300 rounded-lg mb-4"></textarea>
            <div class="flex space-x-3">
                <button id="confirmWithdraw" class="flex-1 bg-red-500 text-white py-3 rounded-lg font-semibold">–°–Ω—è—Ç—å</button>
                <button id="cancelWithdraw" class="flex-1 bg-gray-300">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div id="addGoalModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 m-4 max-w-md w-full">
            <h3 class="text-xl font-semibold mb-4">–ù–æ–≤–∞—è —Ü–µ–ª—å</h3>
            <input type="text" id="goalName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏" class="w-full p-3 border border-gray-300 rounded-lg mb-4">
            <input type="number" id="goalAmount" placeholder="–°—É–º–º–∞ —Ü–µ–ª–∏" class="w-full p-3 border border-gray-300 rounded-lg mb-4">
            <div class="flex space-x-3">
                <button id="confirmGoal" class="flex-1 bg-primary text-white py-3 rounded-lg font-semibold">–°–æ–∑–¥–∞—Ç—å</button>
                <button id="cancelGoal" class="flex-1 bg-gray-300">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        let currentBalance = 0;
        let goals = [];
        let transactions = [];

        const currentBalanceElement = document.getElementById("currentBalance");
        const goalsListElement = document.getElementById("goalsList");
        const transactionsListElement = document.getElementById("transactionsList");

        const addMoneyModal = document.getElementById("addMoneyModal");
        const withdrawMoneyModal = document.getElementById("withdrawMoneyModal");
        const addGoalModal = document.getElementById("addGoalModal");

        function initializeFromStorage() {
            const savedBalance = localStorage.getItem("piggyBankBalance");
            const savedGoals = localStorage.getItem("piggyBankGoals");
            const savedTransactions = localStorage.getItem("piggyBankTransactions");

            if (savedBalance) currentBalance = parseFloat(savedBalance);
            if (savedGoals) goals = JSON.parse(savedGoals);
            if (savedTransactions) transactions = JSON.parse(savedTransactions);

            updateUI();
        }

        function saveToStorage() {
            localStorage.setItem("piggyBankBalance", currentBalance.toString());
            localStorage.setItem("piggyBankGoals", JSON.stringify(goals));
            localStorage.setItem("piggyBankTransactions", JSON.stringify(transactions));
        }

        function updateUI() {
            currentBalanceElement.textContent = `${currentBalance.toLocaleString("ru-RU")}`;
            renderGoals();
            renderTransactions();
            saveToStorage();
        }

        function renderGoals() {
            goalsListElement.innerHTML = "";

            if (goals.length === 0) {
                goalsListElement.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-gifts text-4xl mb-4 text-accent"></i>
                        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ü–µ–ª–µ–π</p>
                    </div>`;
                return;
            }

            goals.forEach(goal => {
                const progress = Math.min((currentBalance / goal.amount) * 100, 100);
                const goalElement = document.createElement("div");
                goalElement.className = "bg-gray-50 rounded-lg p-4";

                goalElement.innerHTML = `
                    <div class="flex justify-between mb-2">
                        <h3 class="font-semibold text-gray-800">${goal.name}</h3>
                        <span class="text-sm font-bold text-primary">${goal.amount.toLocaleString("ru-RU")}</span>
                    </div>

                    <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                        <div class="bg-accent h-2 rounded-full" style="width: ${progress}%"></div>
                    </div>

                    <div class="flex justify-between text-sm text-gray-600">
                        <span>–ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress.toFixed(1)}%</span>
                        <span>–û—Å—Ç–∞–ª–æ—Å—å: ${(goal.amount - currentBalance > 0 ? goal.amount - currentBalance : 0).toLocaleString("ru-RU")}</span>
                    </div>
                `;

                goalsListElement.appendChild(goalElement);
            });
        }

        function renderTransactions() {
            transactionsListElement.innerHTML = "";

            if (transactions.length === 0) {
                transactionsListElement.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-scroll text-4xl mb-4"></i>
                        <p>–û–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
                    </div>`;
                return;
            }

            transactions.slice().reverse().forEach(transaction => {
                const isPositive = transaction.amount > 0;

                const item = document.createElement("div");
                item.className = "flex justify-between py-3 border-b";

                item.innerHTML = `
                    <div>
                        <div class="font-medium">${transaction.description || "–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è"}</div>
                        <div class="text-sm text-gray-500">
                            ${new Date(transaction.date).toLocaleDateString("ru-RU")}
                        </div>
                    </div>

                    <div class="${isPositive ? "text-success" : "text-red-500"} font-bold">
                        ${transaction.amount > 0 ? "+" : ""}${transaction.amount.toLocaleString("ru-RU")}
                    </div>
                `;

                transactionsListElement.appendChild(item);
            });
        }

        function addTransaction(amount, description) {
            transactions.push({
                id: Date.now(),
                amount,
                description: description || "–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è",
                date: new Date().toISOString()
            });

            currentBalance += amount;
            updateUI();
        }

        // –∫–Ω–æ–ø–∫–∏
        document.getElementById("addMoney").onclick = () => {
            addMoneyModal.classList.remove("hidden");
            addMoneyModal.classList.add("flex");
        };

        document.getElementById("withdrawMoney").onclick = () => {
            withdrawMoneyModal.classList.remove("hidden");
            withdrawMoneyModal.classList.add("flex");
        };

        document.getElementById("addGoal").onclick = () => {
            addGoalModal.classList.remove("hidden");
            addGoalModal.classList.add("flex");
        };

        // –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏
        document.querySelectorAll(".quick-action").forEach(btn => {
            btn.addEventListener("click", () => {
                addTransaction(parseInt(btn.dataset.amount), "–ë—ã—Å—Ç—Ä–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ");
            });
        });

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
        document.getElementById("confirmAdd").onclick = () => {
            let amount = parseFloat(document.getElementById("addAmount").value);
            let desc = document.getElementById("addDescription").value;

            if (amount > 0) {
                addTransaction(amount, desc);
                addMoneyModal.classList.add("hidden");
            }
        };

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–Ω—è—Ç–∏—è
        document.getElementById("confirmWithdraw").onclick = () => {
            let amount = parseFloat(document.getElementById("withdrawAmount").value);
            let desc = document.getElementById("withdrawDescription").value;

            if (amount > 0 && amount <= currentBalance) {
                addTransaction(-amount, desc);
                withdrawMoneyModal.classList.add("hidden");
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");
            }
        };

        // –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–∏
        document.getElementById("confirmGoal").onclick = () => {
            let name = document.getElementById("goalName").value;
            let amount = parseFloat(document.getElementById("goalAmount").value);

            if (name && amount > 0) {
                goals.push({ id: Date.now(), name, amount });
                addGoalModal.classList.add("hidden");
                updateUI();
            }
        };

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫
        document.getElementById("cancelAdd").onclick = () => addMoneyModal.classList.add("hidden");
        document.getElementById("cancelWithdraw").onclick = () => withdrawMoneyModal.classList.add("hidden");
        document.getElementById("cancelGoal").onclick = () => addGoalModal.classList.add("hidden");

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –æ–∫–Ω–∞
        [addMoneyModal, withdrawMoneyModal, addGoalModal].forEach(m => {
            m.addEventListener("click", e => {
                if (e.target === m) m.classList.add("hidden");
            });
        });

        initializeFromStorage();
    </script>

</body>
</html>
